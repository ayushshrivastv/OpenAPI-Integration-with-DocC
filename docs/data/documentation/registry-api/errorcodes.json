{"sections":[],"abstract":[{"text":"Understand how the Swift Package Registry API communicates errors and how to handle them.","type":"text"}],"identifier":{"url":"doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/ErrorCodes","interfaceLanguage":"openapi"},"metadata":{"modules":[{"name":"Registry API"}],"title":"Error Codes","roleHeading":"Article","role":"article"},"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"inlineContent":[{"type":"text","text":"The Swift Package Registry API uses standard HTTP status codes combined with detailed error responses to provide clear information about what went wrong. All error responses follow the RFC 7807 Problem Details format, allowing both machines and humans to understand the nature of errors."}],"type":"paragraph"},{"anchor":"Problem-Details-Response-Format","level":2,"type":"heading","text":"Problem Details Response Format"},{"inlineContent":[{"type":"text","text":"When an error occurs, the API returns a problem details object with the following structure:"}],"type":"paragraph"},{"syntax":"json","code":["{","  \"type\": \"https:\/\/registry.example.com\/docs\/errors\/invalid-version\",","  \"title\": \"Invalid Version Format\",","  \"status\": 400,","  \"detail\": \"The version '1.x' does not conform to semantic versioning requirements\",","  \"instance\": \"urn:uuid:6493675d-9af4-4f9d-b8c3-90c5e33f3db1\"","}"],"type":"codeListing"},{"inlineContent":[{"text":"The object contains these fields:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"type","type":"codeVoice"},{"text":": A URI reference that identifies the problem type","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"title","type":"codeVoice"},{"type":"text","text":": A short, human-readable summary of the problem"}]}]},{"content":[{"inlineContent":[{"code":"status","type":"codeVoice"},{"type":"text","text":": The HTTP status code"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"detail"},{"type":"text","text":": A human-readable explanation specific to this occurrence of the problem"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"instance"},{"text":": A URI reference that identifies the specific occurrence of the problem","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":2,"type":"heading","text":"Common Error Types","anchor":"Common-Error-Types"},{"level":3,"type":"heading","text":"Authentication Errors (401, 403)","anchor":"Authentication-Errors-401-403"},{"header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"text":"Status","type":"text"}]}],[{"inlineContent":[{"type":"text","text":"Type"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Description"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"401"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"unauthorized"}],"type":"paragraph"}],[{"inlineContent":[{"text":"The request lacks valid authentication credentials","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"403"}],"type":"paragraph"}],[{"inlineContent":[{"text":"forbidden","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"The authenticated user lacks permission for the requested operation","type":"text"}],"type":"paragraph"}]]],"type":"table"},{"type":"codeListing","code":["\/\/ Example: Handling an authentication error","do {","    let (data, response) = try await session.data(for: request)","    guard let httpResponse = response as? HTTPURLResponse else { return }","    ","    if httpResponse.statusCode == 401 {","        \/\/ Handle unauthorized error - request new credentials","        refreshCredentials()","    } else if httpResponse.statusCode == 403 {","        \/\/ Handle forbidden error - inform user they lack permission","        showPermissionError()","    }","} catch {","    \/\/ Handle network errors","}"],"syntax":"swift"},{"level":3,"type":"heading","text":"Resource Errors (404, 410)","anchor":"Resource-Errors-404-410"},{"header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Status"}]}],[{"inlineContent":[{"type":"text","text":"Type"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Description"}],"type":"paragraph"}]],[[{"type":"paragraph","inlineContent":[{"text":"404","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"text":"not-found","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"The requested resource does not exist"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"410"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"gone"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"The resource previously existed but is no longer available"}]}]]],"type":"table"},{"level":3,"type":"heading","text":"Request Validation Errors (400, 422)","anchor":"Request-Validation-Errors-400-422"},{"header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"text":"Status","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"text":"Type","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Description"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"400"}]}],[{"type":"paragraph","inlineContent":[{"text":"bad-request","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"The request could not be understood or was missing required parameters"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"422","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"validation-failed"}]}],[{"type":"paragraph","inlineContent":[{"text":"The request was well-formed but contained semantic errors","type":"text"}]}]]],"type":"table"},{"level":3,"type":"heading","text":"Rate Limiting Errors (429)","anchor":"Rate-Limiting-Errors-429"},{"header":"row","rows":[[[{"inlineContent":[{"text":"Status","type":"text"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"text":"Type","type":"text"}]}],[{"inlineContent":[{"text":"Description","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"429","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"too-many-requests"}],"type":"paragraph"}],[{"inlineContent":[{"text":"The client has sent too many requests in a given time period","type":"text"}],"type":"paragraph"}]]],"type":"table"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Rate limiting responses include additional headers:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"RateLimit-Limit"},{"text":": The maximum number of requests allowed in the current time window","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"RateLimit-Remaining","type":"codeVoice"},{"text":": The number of requests remaining in the current time window","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"RateLimit-Reset"},{"type":"text","text":": The time when the current rate limit window resets (in UTC epoch seconds)"}]}]}]},{"level":3,"type":"heading","text":"Server Errors (500, 503)","anchor":"Server-Errors-500-503"},{"header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"text":"Status","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Type"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Description"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"500"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"server-error"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"An unexpected error occurred on the server"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"503"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"service-unavailable"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"The service is temporarily unavailable"}]}]]],"type":"table"},{"level":2,"type":"heading","text":"Best Practices for Error Handling","anchor":"Best-Practices-for-Error-Handling"},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Always check status codes"}]},{"type":"text","text":": Validate HTTP status codes before processing responses"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Parse problem details","type":"text"}]},{"type":"text","text":": Extract the detailed error information from the response body"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Implement exponential backoff","type":"text"}]},{"type":"text","text":": For rate limiting and server errors, use increasing delays between retries"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Present meaningful messages"}],"type":"strong"},{"text":": Translate error responses into user-friendly messages","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Log rich error data"}]},{"type":"text","text":": Include the error "},{"code":"type","type":"codeVoice"},{"type":"text","text":" and "},{"code":"instance","type":"codeVoice"},{"type":"text","text":" in logs for easier troubleshooting"}]}]}]},{"type":"codeListing","code":["\/\/ Example: Comprehensive error handling with retry logic","func fetchPackage(scope: String, name: String, version: String) async throws -> Data {","    var retryCount = 0","    let maxRetries = 3","    ","    while true {","        do {","            let url = URL(string: \"https:\/\/registry.example.com\/\\(scope)\/\\(name)\/\\(version).zip\")!","            let (data, response) = try await URLSession.shared.data(from: url)","            ","            guard let httpResponse = response as? HTTPURLResponse else {","                throw RegistryError.invalidResponse","            }","            ","            switch httpResponse.statusCode {","            case 200..<300:","                return data","            case 429:","                if retryCount >= maxRetries {","                    throw RegistryError.rateLimitExceeded","                }","                ","                \/\/ Parse retry-after header or use exponential backoff","                let retryAfter = httpResponse.value(forHTTPHeaderField: \"Retry-After\")","                    .flatMap(Int.init) ?? Int(pow(2.0, Double(retryCount + 1)))","                ","                \/\/ Wait before retrying","                try await Task.sleep(nanoseconds: UInt64(retryAfter * 1_000_000_000))","                retryCount += 1","                continue","                ","            case 400..<500:","                \/\/ Parse problem details","                let problem = try JSONDecoder().decode(ProblemDetails.self, from: data)","                throw RegistryError.clientError(problem)","                ","            case 500..<600:","                if retryCount >= maxRetries {","                    throw RegistryError.serverError","                }","                ","                \/\/ Use exponential backoff for server errors","                try await Task.sleep(nanoseconds: UInt64(pow(2.0, Double(retryCount + 1)) * 1_000_000_000))","                retryCount += 1","                continue","                ","            default:","                throw RegistryError.unknownError","            }","        } catch {","            if retryCount >= maxRetries {","                throw error","            }","            ","            \/\/ Network error - retry with backoff","            try await Task.sleep(nanoseconds: UInt64(pow(2.0, Double(retryCount + 1)) * 1_000_000_000))","            retryCount += 1","        }","    }","}"],"syntax":"swift"}]}],"kind":"article","hierarchy":{"paths":[["doc:\/\/com.example.RegistryAPI\/documentation\/RegistryAPI"]]},"schemaVersion":{"major":0,"minor":3,"patch":0},"seeAlsoSections":[{"title":"Related Documentation","identifiers":["doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/RateLimiting","doc:\/\/com.example.RegistryAPI\/documentation\/RegistryAPI\/ProblemDetails"],"anchor":"Related-Documentation"},{"title":"Guides","identifiers":["doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/Authentication","doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/Publishing","doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/RateLimiting","doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/Security","doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/Performance"],"generated":true,"anchor":"Guides"}],"references":{"doc://com.example.RegistryAPI/documentation/Registry-API/Security":{"kind":"article","identifier":"doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/Security","url":"\/documentation\/registry-api\/security","abstract":[{"text":"Learn how to securely interact with the Swift Package Registry API.","type":"text"}],"type":"topic","title":"Security Best Practices","role":"article"},"doc://com.example.RegistryAPI/documentation/Registry-API/Publishing":{"url":"\/documentation\/registry-api\/publishing","identifier":"doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/Publishing","type":"topic","kind":"article","title":"Publishing Packages","abstract":[{"type":"text","text":"Learn how to publish your Swift packages to a package registry."}],"role":"article"},"doc://com.example.RegistryAPI/documentation/Registry-API/Performance":{"url":"\/documentation\/registry-api\/performance","identifier":"doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/Performance","type":"topic","kind":"article","title":"Performance Optimization","abstract":[{"type":"text","text":"Learn how to optimize your Swift Package Registry API usage for maximum performance."}],"role":"article"},"doc://com.example.RegistryAPI/documentation/RegistryAPI/ProblemDetails":{"abstract":[{"type":"strong","inlineContent":[{"type":"text","text":"Properties:"}]}],"title":"ProblemDetails","url":"\/documentation\/registryapi\/problemdetails","kind":"symbol","role":"symbol","fragments":[{"text":"Schema","kind":"text"}],"navigatorTitle":[{"text":"ProblemDetails","kind":"text"}],"identifier":"doc:\/\/com.example.RegistryAPI\/documentation\/RegistryAPI\/ProblemDetails","type":"topic"},"doc://com.example.RegistryAPI/documentation/RegistryAPI":{"identifier":"doc:\/\/com.example.RegistryAPI\/documentation\/RegistryAPI","abstract":[{"type":"text","text":"Interact with Swift packages through a standardized API for publishing, discovering, and retrieving packages."}],"role":"collection","kind":"symbol","type":"topic","title":"Registry API","url":"\/documentation\/registryapi"},"doc://com.example.RegistryAPI/documentation/Registry-API/RateLimiting":{"role":"article","title":"Rate Limiting","abstract":[{"type":"text","text":"Learn about the Swift Package Registry’s rate limiting mechanisms and how to optimize your usage."}],"type":"topic","kind":"article","identifier":"doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/RateLimiting","url":"\/documentation\/registry-api\/ratelimiting"},"doc://com.example.RegistryAPI/documentation/Registry-API/Authentication":{"url":"\/documentation\/registry-api\/authentication","abstract":[{"type":"text","text":"Learn how to authenticate with the Swift Package Registry API for accessing private packages and publishing."}],"type":"topic","identifier":"doc:\/\/com.example.RegistryAPI\/documentation\/Registry-API\/Authentication","title":"Authentication","role":"article","kind":"article"}}}